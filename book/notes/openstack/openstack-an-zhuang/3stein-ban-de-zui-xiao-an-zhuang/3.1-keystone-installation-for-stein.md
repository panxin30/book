---
description: Identity service – keystone installation for Stein
---

# 3.1、keystone installation for Stein

## 一、先决条件

Before you install and configure the Identity service, you must create a database.

```text
MariaDB [(none)]> CREATE DATABASE keystone;
MariaDB [(none)]> GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'localhost' IDENTIFIED BY 'Abcd.1234';
MariaDB [(none)]> GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'%' IDENTIFIED BY 'Abcd.1234';
```

## 二、安装和配置components

视频openstack之keystone（3）

```text
identity: 主要有两个功能
    1. 用户管理：认证和授权
        认证方式有两种：
            token
            帐号和密码
    2. 服务目录：所有可用服务的信息库,包含其API endpoint路径
    
    几个核心术语：
        user：一个user可以关联至多个tenant
        role：角色
        tenant：租户
        service：服务swift,glance,nova等
        endpoint：服务的访问入口
        token：令牌，用于认证及授权等    
```

参考：[https://docs.openstack.org/keystone/stein/install/keystone-install-ubuntu.html](https://docs.openstack.org/keystone/stein/install/keystone-install-ubuntu.html)

```text
[database]
connection = mysql+pymysql://keystone:Abcd.1234@10.0.0.11/keystone
# 参考文档中写的controller是在3个节点hosts中写死了的，所以在该写地址的地方写的是controller应该
# 用test-controller-node01代替或者直接写10.0.0.11
# 10.0.0.11 test-controller-node01
# 10.0.0.21 test-compute-node01
# 10.0.0.31 test-network-node01
```

## 三、Create a domain, projects, users, and roles

参考：[https://docs.openstack.org/keystone/stein/install/keystone-users-ubuntu.html](https://docs.openstack.org/keystone/stein/install/keystone-users-ubuntu.html)

