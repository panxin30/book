# 网络虚拟化技术基础

```text
网络虚拟化：
    桥接
    隔离
    路由
    NAT
一旦虚拟机部署到了某个物理机上，cpu和内存就只能使用该物理

管理节点两张网卡 内网网络网卡或者多一个可以访问互联网的网卡
物理机节点两张网卡 一个用于实现管理操作，一个用于所有能建立虚拟机的物理机彼此通信
网络节点3张网卡，一个内部管理用，一个用于连接互联网，一个跟各物理机通信

管理节点跟虚拟化不在同一个概念中

VLAN间路由:
    路由器:
        访问链接：router为每个vlan提供一个接口
        汇聚链接：router只向交换机提供一个接口
    三层交换机：
        三层交换机既有二层功能又有三层功能。首先在2层能够在各个接口之间实现报文交换的功能，
在上面额外提供一个软件实现路由

# 容器级的虚拟化，就是利用linux内核提供的资源隔离功能来实现的。

虚拟化技术：
    linux内核：
        namespace：名称空间，完成特定类型资源的隔离
        cgroups：控制组，可以在已经隔离出来的的名称空间中，按比例把资源分配到名称空间中去
            假设一台服务器有16核，分成4个分支ABCD（A-8C,B-4C,C-2C,D-2C）A这个分支可以分成
            3个分支(A1-3C,A2-3C,A3-2C)。那么一个进程，可以绑定到根上，这16核，它想用多少用多
            少。也可以绑定到A分支上，最多能用8核。也可以绑定到A1分支上，最多能用3核。也可以绑定
            到B分支上，最多能用4核。
网络虚拟化技术
    复杂的虚拟化网络：
        netns
        OpenVSwitch
    openvswitch:基于C语言研发，特性：
        支持802.1q,trunk,access
        支持NIC绑定，
        NetFlow,sFlow
        QoS配置及策略
        GRE，Vxlan
        OpenFlow
        基于linux实现高性能转发
    openvswitch的组成部分：
        ovs-vswitchd: ovs daemon,实现数据报文交换功能，和linux内核兼容模块一同实现了基于流的
        交换技术
        ovsdb-server:轻量级的数据库服务，主要保存了整个OVS的配置信息
        ovs-vsctl: 用于获取或更改ovs-vswitchd的配置信息，修改操作会保存到ovsdb-server


```

